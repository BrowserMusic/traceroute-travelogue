[
  {
    "type": "animation",
    "components": [
      {
        "name": "img-timer",
        "state": "start",
        "settings": {
          "src": "/images/loadscreen.gif",
          "timer": 2000
        }
      }
    ]
  },
  {
    "type": "dialogue",
    "id": "main",
    "level": 1,
    "components": [
      {
        "name": "img-timer",
        "state": "stop"
      }
    ],
    "lines": [
      {
        "speaker": "Orb",
        "text": "STOP. DESTINATION ADDRESS MUST BE PRESENTED BEFORE PASSAGE CAN BE GRANTED FOR ANY AND ALL SEAWARD JOURNIES. "
      },
      {
        "speaker": "Box",
        "text": "\"hello\""
      },
      {
        "speaker": "Guide",
        "text": "*beeps*"
      },
      {
        "speaker": "Zak",
        "text": "uh, it's beeping again!"
      },
      {
        "speaker": "Guide",
        "text": "WELCOME TO AUCKLAND!"
      },
      {
        "speaker": "Becky",
        "text": "you need to stop scaring me like that!!"
      },
      {
        "speaker": "Guide",
        "text": "If you're reading this, you're probably a packet who's just arrived in the wonderful City of Sails on your last stop before sailing internationally off across the Pacific. Please ensure you know your destination IP address before you depart!"
      }
    ]
  },
  {
    "type": "animation",
    "pathid": "landing-auck",
    "components": [
      {
        "name": "hub",
        "state": "start",
        "settings": {
          "locations": [
            {
              "text": "visit local nameserver",
              "img": "/images/email.gif",
              "to": "auck-convo-1"
            },
            {
              "text": "where are we going, anyway?",
              "img": "/images/ocean.gif",
              "to": "auck-convo-2"
            },
            {
              "text": "down underground",
              "img": "/images/mine_travel.gif",
              "to": "auck-proceed",
              "disabled": true
            }
          ],
          "onskip": "auck-proceed"
        }
      }
    ]
  },
  {
    "type": "dialogue",
    "id": "main",
    "level": 1,
    "pathid": "auck-convo-1",
    "lines": [
      {
        "speaker": "Zak",
        "text": "hey guide, now that we're in Auckland, can you show us to the nameserver?"
      },
      {
        "speaker": "Guide",
        "text": "Sure thing!"
      },
      {
        "speaker": "Becky",
        "text": "is no one else weirded out by the fact that you talk?"
      },
      {
        "speaker": "Box",
        "text": "\"hello\""
      },
      {
        "speaker": "ns1",
        "text": "Hey there, this is ns1.dnsblast.com! Heard you all were looking for [[redacted]]'s IP address?"
      },
      {
        "speaker": "Zak",
        "text": "yeah!"
      },
      {
        "speaker": "Zak",
        "text": "why *are* you the one that knows their IP address, anyway?"
      },
      {
        "speaker": "ns1",
        "text": "Oh, because [[redacted]] registered their domain through me!"
      },
      {
        "speaker": "ns1",
        "text": "Or, my parent company, anyway."
      },
      {
        "speaker": "ns1",
        "text": "Every registrar has a number of nameservers that act as a phone book for all the domains registered through them. More than one, typically, to handle traffic when there's a lot of it. I'm ns1, but you better believe there's at *least* an ns2 and an ns3 as well."
      },
      {
        "speaker": "Becky",
        "text": "does that mean this is where [[redacted]] is hosted, too?"
      },
      {
        "speaker": "ns1",
        "text": "Usually not! In fact, their nameserver might not even be located in New Zealand."
      },
      {
        "speaker": "ns1",
        "text": "I might just be an abstraction for the sake of your journey."
      },
      {
        "speaker": "Becky",
        "text": "*what*"
      },
      {
        "speaker": "ns1",
        "text": "But the company that hosts the actual *content* of the website and a site's domain registrar are often two different companies."
      },
      {
        "speaker": "ns1",
        "text": "Even if the same company serves as both the host and the registrar, the nameservers of the company are still completely ignorant of the content."
      },
      {
        "speaker": "ns1",
        "text": "I don't have the faintest clue of what's contained in [[redacted]]'s website. It could be nothing, though that seems unlikely!"
      },
      {
        "speaker": "ns1",
        "text": "All I can give you is an IP address, which is something like 14.1.88.255.",
        "components": [
          {
            "name": "ip-address",
            "state": "start"
          }
        ]
      },
      {
        "speaker": "Guide",
        "text": "That was a completely random IP address, that may or may not point to a real website, but it exists within the range of IP addresses for New Zealand! Did you know that you can look up the IP address range of any country? [Here's the full list of address blocks for New Zealand!](https://lite.ip2location.com/new-zealand-ip-address-ranges?lang=en_US) And if you [look up a domain name through ICANN](https://lookup.icann.org/), you can find out what its nameservers are!"
      },
      {
        "speaker": "Zak",
        "text": "so now that we have the IP address, we're good? we can head the website?"
      },
      {
        "speaker": "Becky",
        "text": "I doubt it's that simple, but we can at least leave Auckland I think."
      }
    ]
  },
  {
    "type": "dialogue",
    "id": "tutorial",
    "pathid": "auck-convo-2",
    "level": 2,
    "components": [
      {
        "name": "img-timer",
        "state": "stop"
      }
    ],
    "lines": [
      {
        "speaker": "Becky",
        "text": "so we started at Wellington, then went to Whanganui, and now we're in Auckland."
      },
      {
        "speaker": "Becky",
        "text": "how does that work vis-a-vis the fact that this is a packet moving through the internet?"
      },
      {
        "speaker": "Zak",
        "text": "I can answer this one!"
      },
      {
        "speaker": "Zak",
        "text": "there's the obvious part – any packet has to pass from router to router to router until it gets to its destination."
      },
      {
        "speaker": "Zak",
        "text": "if you send a packet to a server that's close to you geographically, it travels less physical distance and passes through fewer routers in the process."
      },
      {
        "speaker": "Zak",
        "text": "it's impossible to predict 100% where a packet will pass through, because if traffic is heavy in one location, a packet will get pushed elsewhere, even if geographically it seems like it makes less sense."
      },
      {
        "speaker": "Zak",
        "text": "but there are ways to get some idea of where it *might* go!"
      },
      {
        "speaker": "Zak",
        "text": "`traceroute` is a terminal command that simulates the path by sending a bunch of packets with a really short Time-to-Live. each router we hear from is called a **hop** on the route."
      },
      {
        "speaker": "Guide",
        "text": "Below is a graphical representation of this process!"
      },
      {
        "speaker": "Zak",
        "text": "the first one has a TTL of 1, so it dies at the first hop."
      },
      {
        "speaker": "Zak",
        "text": "the next one has a TTL of 2, so it ought to make it back to the first hop, go forward one more hop, and die at that second router."
      },
      {
        "speaker": "Zak",
        "text": "if or when we get a packet that makes it all the way to the destination address, we know what routers we can expect most packets to pass through, and where those routers are."
      },
      {
        "speaker": "Becky",
        "text": "so when we tested this, were we endlessly sending your severed head over the wires, knowing it was destined only to die every time?"
      },
      {
        "speaker": "Zak",
        "text": "that's a bit... morbid"
      },
      {
        "speaker": "Becky",
        "text": "I'm not hearing a \"no?\""
      },
      {
        "speaker": "Zak",
        "text": "anyways! sometimes, when we did a traceroute, it took us across the Pacific––other times, it seemed to go through Singapore and take us all the way across the world in the other direction!"
      },
      {
        "speaker": "Zak",
        "text": "we're just basing the hops on our trip off of what seemed to be the most common."
      },
      {
        "speaker": "Becky",
        "text": "which involves going underwater, like we're about to do."
      }
    ]
  },
]